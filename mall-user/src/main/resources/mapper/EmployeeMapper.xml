<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.force.mall.user.mapper.EmployeeMapper" >

    <resultMap id="EmployeeInfo" type="com.force.mall.user.pojo.EmployeeInfo">
        <id column="emp_id" property="empId" jdbcType="VARCHAR"/>
        <result column="emp_age" property="empAge" jdbcType="VARCHAR" />
        <result column="emp_sex" property="empSex" jdbcType="VARCHAR" />
        <result column="emp_name" property="empName" jdbcType="VARCHAR" />
        <result column="emp_email" property="empEmail" jdbcType="VARCHAR" />
        <result column="emp_address" property="empAddress" jdbcType="VARCHAR" />
        <collection property="employeeUser" javaType="java.util.List" ofType="com.force.mall.user.pojo.EmployeeUser">
            <id column="emp_id" property="empId" jdbcType="VARCHAR" />
            <result column="emp_username" property="empUsername" jdbcType="VARCHAR" />
            <result column="emp_password" property="empPassword" jdbcType="VARCHAR" />
            <result column="submissionDate" property="submissionDate" jdbcType="VARCHAR" />
        </collection>
    </resultMap>


    <select id="selectEmployeeInfoList" resultMap="EmployeeInfo">
        SELECT i.emp_id,emp_age,emp_sex,
                emp_name,emp_email,emp_address,
                emp_username,emp_password,submissionDate
            FROM employee_info i,employee_user u
                WHERE i.emp_id = u.emp_id
    </select>

    <resultMap id="EmployeeUserInfo" type="com.force.mall.user.pojo.EmployeeUserInfo">
        <id column="emp_id" property="empId" jdbcType="VARCHAR"/>
        <result column="emp_age" property="empAge" jdbcType="VARCHAR" />
        <result column="emp_sex" property="empSex" jdbcType="VARCHAR" />
        <result column="emp_name" property="empName" jdbcType="VARCHAR" />
        <result column="emp_email" property="empEmail" jdbcType="VARCHAR" />
        <result column="emp_address" property="empAddress" jdbcType="VARCHAR" />
        <result column="emp_id" property="empId" jdbcType="VARCHAR" />
        <result column="emp_username" property="empUsername" jdbcType="VARCHAR" />
        <result column="emp_password" property="empPassword" jdbcType="VARCHAR" />
        <result column="submissionDate" property="submissionDate" jdbcType="VARCHAR" />
    </resultMap>

    <select id="selectEmployeeUserInfo" resultMap="EmployeeUserInfo">
        SELECT i.emp_id,emp_age,emp_sex,
                emp_name,emp_email,emp_address,
                emp_username,emp_password,submissionDate
            FROM employee_info i,employee_user u
                WHERE i.emp_id = u.emp_id
    </select>
    
    <parameterMap id="addEmployeeUserInfo" type="com.force.mall.user.pojo.EmployeeUserInfo">
        <parameter property="empId" jdbcType="VARCHAR"/>
        <parameter property="empAge" jdbcType="VARCHAR" />
        <parameter property="empSex" jdbcType="VARCHAR" />
        <parameter property="empName" jdbcType="VARCHAR" />
        <parameter property="empEmail" jdbcType="VARCHAR" />
        <parameter property="empAddress" jdbcType="VARCHAR" />
        <parameter property="empId" jdbcType="VARCHAR" />
        <parameter property="empUsername" jdbcType="VARCHAR" />
        <parameter property="empPassword" jdbcType="VARCHAR" />
        <parameter property="submissionDate" jdbcType="VARCHAR" />
    </parameterMap>
    
    <insert id="insertEmployeeInfo" parameterMap="EmployeeInfo" keyColumn="empId">
        insert into employee_info (emp_id,emp_age,emp_sex,emp_name,emp_email,emp_address)
         values (#{empId},#{empAge},#{empSex},#{empName},#{empEmail},#{empAddress});
    </insert>
    <insert id="insertEmployeeUser" parameterMap="EmployeeUser" keyColumn="empId">
        insert into employee_info (emp_id,emp_username,emp_password,submissionDate)
         values (#{empId},#{empUsername},#{empPassword},#{submissionDate});
    </insert>
 </mapper>